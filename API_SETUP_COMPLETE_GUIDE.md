# 🚀 API 연동 완벽 가이드

## 📋 목차
1. [기상청 API 설정](#1-기상청-api-설정-완전-무료)
2. [카카오 API 설정](#2-카카오-api-설정)
3. [환경변수 설정](#3-환경변수-설정)
4. [작동 확인](#4-작동-확인)

---

## 1. 기상청 API 설정 (완전 무료!)

### 📝 발급 절차

#### Step 1: 공공데이터포털 회원가입
1. https://www.data.go.kr 접속
2. 우측 상단 **"회원가입"** 클릭
3. **본인인증** 필요 (휴대폰 인증)
4. 회원가입 완료 후 로그인

#### Step 2: API 신청
1. 상단 검색창에 **"단기예보"** 입력
2. **"기상청_단기예보 ((구)_동네예보) 조회서비스"** 클릭
3. 우측 파란색 **"활용신청"** 버튼 클릭
4. 활용 정보 입력:
   - **활용 목적**: "점심 메뉴 추천 웹사이트 날씨 표시"
   - **상세 기능**: "사용자 위치 기반 날씨 정보 제공"
5. **"신청"** 버튼 클릭

#### Step 3: 승인 대기 (1~2시간)
- 보통 **1시간 이내** 자동 승인
- 이메일로 승인 통보 받음
- 승인 전에는 사용 불가

#### Step 4: 서비스키 확인
1. 로그인 후 우측 상단 **"마이페이지"**
2. 좌측 메뉴 **"오픈API"** → **"개발계정"**
3. "기상청_단기예보 조회서비스" 찾기
4. **"서비스키"** 복사 (긴 영문/숫자 조합)

### ✅ 발급 완료!
서비스키를 복사해서 `.env.local` 파일에 붙여넣으세요.

---

## 2. 카카오 API 설정

### 📝 발급 절차

#### Step 1: 카카오 개발자 계정 생성
1. https://developers.kakao.com 접속
2. 우측 상단 **"로그인"** (카카오 계정 필요)
3. 로그인 완료

#### Step 2: 애플리케이션 생성
1. 상단 메뉴 **"내 애플리케이션"** 클릭
2. **"애플리케이션 추가하기"** 클릭
3. 앱 정보 입력:
   - **앱 이름**: "점심메뉴추천" (아무거나)
   - **사업자명**: 개인 (또는 회사명)
4. **"저장"** 클릭

#### Step 3: REST API 키 확인
1. 생성된 앱 클릭
2. 좌측 메뉴 **"앱 키"** 클릭
3. **"REST API 키"** 복사

**중요:** JavaScript 키가 아니라 **REST API 키**를 사용하세요!

#### 사용자의 REST API 키 (스크린샷 확인)
```
f53f2bae4d1a02bd9c49a99591d3034b
```

### ✅ 발급 완료!
REST API 키를 복사해서 `.env.local` 파일에 붙여넣으세요.

---

## 3. 환경변수 설정

### Step 1: `.env.local` 파일 생성

프로젝트 루트 폴더(`E:/lunchmenu`)에 `.env.local` 파일을 생성하세요:

**Windows 명령 프롬프트:**
```cmd
cd E:\lunchmenu
copy .env.example .env.local
```

**또는 직접 생성:**
1. `E:/lunchmenu` 폴더 열기
2. 메모장으로 새 파일 생성
3. 다른 이름으로 저장 → 파일명: `.env.local` (따옴표 없이)
4. 파일 형식: "모든 파일"

### Step 2: API 키 입력

`.env.local` 파일을 열고 다음 내용을 붙여넣으세요:

```env
# ========================================
# 🌤️ 기상청 API (필수)
# ========================================
NEXT_PUBLIC_KMA_API_KEY=여기에_발급받은_기상청_서비스키_붙여넣기

# ========================================
# 🗺️ 카카오 REST API (필수)
# ========================================
NEXT_PUBLIC_KAKAO_MAP_API_KEY=f53f2bae4d1a02bd9c49a99591d3034b

# ========================================
# 🌍 OpenWeatherMap API (선택사항 - 백업용)
# ========================================
# NEXT_PUBLIC_WEATHER_API_KEY=여기에_OpenWeatherMap_API_키_붙여넣기
```

### Step 3: 예시

실제로 입력하면 이렇게 됩니다:

```env
# 기상청 API
NEXT_PUBLIC_KMA_API_KEY=abc123def456ghi789jkl012mno345pqr678stu901vwx234yz=

# 카카오 API
NEXT_PUBLIC_KAKAO_MAP_API_KEY=f53f2bae4d1a02bd9c49a99591d3034b
```

### ⚠️ 주의사항
- 등호(`=`) 앞뒤에 **공백 없이** 입력
- 따옴표(`"` 또는 `'`) **사용 안 함**
- 맨 뒤에 **세미콜론(`;`) 없음**

---

## 4. 작동 확인

### Step 1: 서버 재시작

기존 서버를 중지하고 재시작해야 환경변수가 적용됩니다:

```bash
# 1. Ctrl+C를 눌러 서버 중지
# 2. 서버 재시작
npm run dev
```

### Step 2: 브라우저 새로고침

```
Ctrl + Shift + R  (Windows/Linux)
Cmd + Shift + R   (Mac)
```

### Step 3: 날씨 확인

브라우저 개발자 도구(F12)를 열고:
1. **Console** 탭 선택
2. 에러 없이 날씨 정보가 표시되는지 확인

**정상 작동:**
```
좌표 변환: (37.5665, 126.978) → 격자(60, 127)
기준 시각: 20251118 1400
기상청 API 응답: {resultCode: "00", resultMsg: "NORMAL_SERVICE"}
날씨 데이터: 기온=15℃, 강수형태=0
```

**API 키 없을 때:**
```
기상청 API 키가 없습니다. 모의 데이터를 사용합니다.
```

### Step 4: 가게 검색 확인

1. 메뉴 추천받기
2. **"근처 가게 찾기"** 클릭
3. Console에서 가게 목록 확인

**정상 작동:**
```javascript
검색된 가게: [
  {name: "맛있는 짜장면", distance: "150", ...},
  ...
]
```

---

## 🎉 완료!

모든 설정이 완료되었습니다!

### ✅ 체크리스트

- [ ] 기상청 API 키 발급 완료
- [ ] 카카오 REST API 키 확인 (`f53f2bae4d1a02bd9c49a99591d3034b`)
- [ ] `.env.local` 파일 생성
- [ ] API 키 입력 완료
- [ ] 서버 재시작 (`npm run dev`)
- [ ] 브라우저 새로고침 (Ctrl+Shift+R)
- [ ] 개발자 도구(F12)에서 에러 없이 작동 확인

---

## 🐛 문제 해결

### 문제 1: "기상청 API 키가 없습니다"
**원인:** API 키가 `.env.local`에 없거나 잘못 입력됨

**해결:**
1. `.env.local` 파일이 `E:/lunchmenu` 폴더에 있는지 확인
2. API 키 앞뒤 공백 제거
3. 서버 재시작 (`Ctrl+C` → `npm run dev`)

### 문제 2: "기상청 API 오류"
**원인:** API 승인이 아직 안 됨 또는 키가 잘못됨

**해결:**
1. 공공데이터포털 마이페이지에서 승인 상태 확인
2. 서비스키를 다시 복사해서 붙여넣기
3. 1~2시간 후 다시 시도

### 문제 3: 가게 검색이 안 됨
**원인:** 카카오 REST API 키가 잘못됨

**해결:**
1. 카카오 개발자 센터에서 **REST API 키** 다시 확인
2. JavaScript 키가 아닌지 확인
3. `.env.local`에 올바른 키 입력

---

## 📞 추가 도움이 필요하면

1. 어느 단계에서 막혔는지
2. 에러 메시지 전체 (F12 Console)
3. `.env.local` 파일 내용 (키는 가려서)

위 정보를 공유해주시면 바로 해결해드릴게요! 😊
